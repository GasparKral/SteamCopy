---
import GamesLayout from '@/layouts/GamesLayout.astro';

import type { GetStaticPaths } from 'astro';
import { db, Games, eq, sql } from 'astro:db';

const games = await db
    .select({
        url: Games.url,
    })
    .from(Games)
    .groupBy(Games.id);

export const getStaticPaths = (() => {
    return games.map((game) => ({
        params: { gameURL: game.url },
    }));
}) satisfies GetStaticPaths;

export const prerender = true;
---

<GamesLayout gameName={Astro.params.gameURL} />
